import jwt, time, requests, json; c=json.load(open(r"C:\Users\carlo\SPR 1.1\credenciais\github_pulso_app.json")); k=open(r"C:\Users\carlo\SPR 1.1\credenciais\github_pulso_private_key.pem").read(); t=int(time.time()); p={"iat":t-60,"exp":t+600,"iss":c["app_id"]}; j=jwt.encode(p,k,algorithm="RS256"); h={"Authorization":f"Bearer {j}","Accept":"application/vnd.github+json"}; i=requests.get("https://api.github.com/app/installations",headers=h).json()[0]["id"]; u=f"https://api.github.com/app/installations/{i}/access_tokens"; r=requests.post(u,headers=h); print("Installation Token:",r.json()["token"])
